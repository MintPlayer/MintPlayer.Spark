<div class="position-fixed w-100 bg-dark top-bar d-flex align-items-center">
  <bs-navbar-toggler [state]="isSidebarVisible()"
                     (stateChange)="toggleSidebar($event)">
  </bs-navbar-toggler>
  <div class="ms-auto me-3 d-flex align-items-center gap-2">
    @if (lang.languages() | keyvalue; as langs) {
      @if (langs.length > 1) {
        <bs-select [ngModel]="lang.language()"
                   (ngModelChange)="lang.setLanguage($event)">
          @for (l of langs; track l.key) {
            <option [ngValue]="l.key">{{ l.value | translate }}</option>
          }
        </bs-select>
      }
    }
    <spark-auth-bar />
  </div>
</div>
<bs-shell [state]="shellState()" [breakpoint]="'md'">
  <nav *bsShellSidebar class="sidebar-inner text-light p-2">
    <h5 class="p-3 border-bottom">Spark Demo</h5>
    <bs-accordion class="d-block">
      @for (group of programUnitGroups(); track group.id) {
      <bs-accordion-tab>
        <bs-accordion-tab-header>
          <span class="triangle me-2"></span>
          <app-icon [name]="group.icon | iconName:'bi-folder'" />
          <span class="ms-2">{{ group.name | translate }}</span>
        </bs-accordion-tab-header>
        @for (unit of group.programUnits; track unit.id) {
        <a [routerLink]="unit | routerLink"
           routerLinkActive="active"
           (click)="onMenuItemClick()"
           class="d-block px-3 py-2 text-light text-decoration-none nav-link">
          <app-icon [name]="unit.icon | iconName:'bi-file'" />
          <span class="ms-2">{{ unit.name | translate }}</span>
        </a>
        }
      </bs-accordion-tab>
      }
    </bs-accordion>
  </nav>

  <main class="p-4">
    <router-outlet />
  </main>
</bs-shell>
